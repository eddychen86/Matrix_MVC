@using Matrix.Extensions
@using Matrix.Services
@model Matrix.ViewModels.MenuViewModel
@inject ICustomLocalizer Localizer

<aside id="sidebar-app" class="top-0 left-0 p-4 h-screen">
    <ul :class="isCollapsed ? 'sidebar-close' : 'sidebar-open'" class="sidebar">
        <!-- Sidebar content here -->
        <li>
            <a asp-area="" asp-controller="Home" asp-action="Index" aria-current="page" class="cts-btn title">
                <img src="~/static/img/Matrix_logo_white.png" alt="Matrix Logo" class="icon-lg">
                <span data-i18n="Matrix">@Localizer["Matrix"]</span>
            </a>
            @if (Model.IsAuthenticated)
            {
                <a asp-controller="Profile" asp-action="Index" aria-current="page" class="cts-btn">
                    <img src="@(!string.IsNullOrEmpty(Model.UserImg) ? Model.UserImg : "/static/img/default-avatar.png")" alt="" class="icon-lg object-cover object-center border-2 border-white" />
                    <span class="title">@Model.UserName</span>
                </a>
            }
        </li>
        <li>
            @* Dashboard-specific menu items from CommonController *@
            @foreach (var item in Model.Dashboards)
            {
                <button class="cts-btn hover:bg-gray-900" v-on:click="loadDashboardPage('@item.Key')">
                    <i data-lucide="@item.Icon" class="icon-base text-white"></i>
                    <span class="title" data-i18n="@item.Key">@item.Title</span>
                </button>
            }
        </li>
        <li>
            @if (Model.UserRole >= 1)
            {
                <a asp-area="Dashboard" asp-controller="Overview" asp-action="Index" aria-current="page">
                    <button :class="isCollapsed ? 'sidebar-btn-none-text' : ''" class="cts-btn">
                        <i data-lucide="layout-dashboard" class="icon-base"></i>
                        <span data-i18n="Dashboard" class="title">@Localizer["Dashboard"]</span>
                    </button>
                </a>
            }
            @foreach (var item in Model.Bottoms)
            {
                <button v-on:click="handleMenuClick('@item.Click')" :class="isCollapsed ? 'sidebar-btn-none-text' : ''" class="cts-btn">
                    <i data-lucide="@item.Icon" class="icon-base"></i>
                    <span class="title" data-i18n="@item.Title">@item.Title</span>
                </button>
            }
        </li>
    </ul>
    
</aside>

